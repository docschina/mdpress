(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{570:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){var e=n.className,t=void 0===e?"":e,o=n.slotKey;return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,{slotKey:o,className:t,markDownString:'# 在 Markdown 中 使用 React\n\n## 浏览器的 API 访问限制\n\n当你在开发一个 MdPress 应用时，由于所有的页面在生成静态 HTML 时都需要通过 Node.js 服务端渲染，因此所有的 React 相关代码都请确保只在组件挂载后访问浏览器 / DOM 的 API。\n\n如果你正在使用，或者需要展示一个对于 SSR 不怎么友好的组件（比如包含了自定义指令），你可以将它们包裹在内置的 `<ClientOnly>` 组件中：\n\n``` md\nimport ClientOnly from \'@app/components/ClientOnly\';\n\n// 其他代码\n<ClientOnly>\n  <NonSSRFriendlyComponent/>\n</ClientOnly>\n```\n\n请注意，这并不能解决一些组件或库在**导入**时就试图访问浏览器 API 的问题 —— 如果需要使用这样的组件或库，你需要在合适的生命周期钩子中**动态导入**它们：\n\n``` jsx\nimport React from \'react\';\n\nclass Comp extends React.Component {\n  componentDidMount(){\n    import(\'./lib-that-access-window-on-import\').then(module => {\n      // use code\n    })\n  }\n  render() {\n    // ...\n  }\n}\n```\n\n## 访问网站以及页面的数据\n\n编译后的组件没有私有数据，但可以访问 [网站的元数据](../theme/writing-a-theme.md#网站和页面的元数据)，举例来说：\n\n**Input**\n\n````` md\n```rc\nreturn JSON.stringify($page,null,2)\n```\n`````\n\n**Output**\n\n``` json\n{\n  "path": "/using-react.html",\n  "title": "Using React in Markdown",\n  "frontmatter": {}\n}\n```\n\n## 使用组件\n\n所有在 `.mdpress/components` 中找到的 `*.js` 文件将会自动地被注册为全局的异步组件，如：\n\n```\n.\n└─ .mdpress\n   └─ components\n      ├─ Demo.js\n      ├─ OtherComponent.js\n      └─ Foo\n         └─ Bar.js\n```\n\n你可以直接使用这些组件在任意的 Markdown 文件中（组件名是通过文件名取到的）：\n\n``` md\n<Demo/>\n<OtherComponent/>\n<Foo_Bar/>\n```\n\n<Demo/>\n\n<OtherComponent/>\n\n<Foo_Bar/>\n\n::: warning 重要！\n请确保一个自定义组件的名字是 PascalCase，否则，它将会被视为一个内联元素，并被包裹在一个 `<p>` 标签中，这将会导致 HTML 渲染紊乱，因为 HTML 标准规定， `<p>` 标签中不允许放置任何块级元素。\n:::\n\n### 在标题中使用组件\n\n你可以在标题中使用 React 组件，但是请留意以下两种方式的不同：\n\n| Markdown | 输出的 HTML | 解析后的标题 |\n|--------|-------------|----------------|\n| <pre v-pre><code> # text &lt;Tag/&gt; </code></pre> | `<h1>text <Tag/></h1>` | `text` |\n| <pre v-pre><code> # text \\`&lt;Tag/&gt;\\` </code></pre> | `<h1>text <code>&lt;Tag/&gt;</code></h1>` | `text <Tag/>` |\n\n被 `<code>` 包装的 HTML 将按原样显示，只有未被包装的 HTML 才会被 React 解析。\n\n::: tip\n输出的 HTML 由 [markdown-it](https://github.com/markdown-it/markdown-it) 完成。而解析后的标题由 MdPress 完成，用于[侧边栏](../theme/default-theme-config.md#侧边栏)以及文档的标题。\n:::\n\n## 使用预处理器\n\nMdPress 对以下预处理器已经内置相关的 webpack 配置：`sass`、`scss`、`less`、`stylus` 和 `pug`。要使用它们你只需要在项目中安装对应的依赖即可。例如，要使用 `sass`，需要安装：\n\n``` bash\nyarn add -D sass-loader node-sass\n```\n \n然后你就可以在组件中使用相应的样式文件。\n\n要在组件中使用 pug，则需要安装 `pug` 和 `pug-plain-loader`:\n\n``` bash\nyarn add -D pug pug-plain-loader\n```\n\n::: tip\n需要指出的是，如果你是一个 `stylus` 用户，你并不需要在你的项目中安装 `stylus` 和 `stylus-loader`，因为 MdPress 已经内置了它们。\n  \n对于那些没有内置的预处理器，除了安装对应的依赖，你还需要 [拓展内部的 Webpack 配置](../config/README.md#configurewebpack)。\n:::\n\n\x3c!--\n## 脚本和样式提升\n\n有时，你可以只想在当前页面应用一些 JavaScript 或者 CSS，在这种情况下，你可以直接在 Markdown 文件中使用原生的 `<script>` 或者 `<style>` 标签，它们将会从编译后的 HTML 文件中提取出来，并作为生成的 `<script>` 和 `<style>` 标签。\n\n<p class="demo" :class="$style.example"></p>\n\n<style module>\n.example {\n  color: #41b883;\n}\n</style>\n\n<script>\nexport default {\n  props: [\'slot-key\'],\n  mounted () {\n    document.querySelector(`.${this.$style.example}`)\n      .textContent = \'这个块是被内联的脚本渲染的，样式也采用了内联样式。\'\n  }\n}\n<\/script>\n--\x3e\n\n## 内置的组件\n\n### OutboundLink <Badge text="stable"/>\n\n(<OutboundLink/>) 用来表明当前是一个外部链接。在 MdPress 中这个组件会紧跟在每一个外部链接后面。\n\n### ClientOnly <Badge text="stable"/>\n\n参考 [浏览器的 API 访问限制](#浏览器的-api-访问限制)。\n\n### Content <Badge text="beta" type="warn"/>\n\n- **Props**:\n\n  - `pageKey` - string, 要渲染的 [page](./global-computed.md#page) 的 hash key, 默认值是当前页面的 key.\n  - `slotKey` - string, 页面的 [markdown slot](./markdown-slot.md) 的 key. 默认值是 [default slot](./markdown-slot.md#default-slot-content).\n\n- **用法**：\n\n指定一个指定页面的特定 slot 用于渲染，当你使用 [自定义布局](../theme/default-theme-config.md#特定页面的自定义布局) 或者自定义主题时，这将非常有用。\n\n\n``` jsx\n<Content/>\n```\n\n**参考:**\n\n- [全局计算属性 > $page](./global-computed.md#page)\n- [Markdown 插槽](./markdown-slot.md)\n- [开发主题 > 获取渲染内容](../theme/writing-a-theme.md#获取渲染内容)\n\n\n### Badge <Badge text="beta" type="warning"/> <Badge text="默认主题"/>\n\n- **Props**:\n\n  - `text` - string\n  - `type` - string, 可选值： `"tip"|"warning"|"error"`，默认值是： `"tip"`\n  - `vertical` - string, 可选值： `"top"|"middle"`，默认值是： `"top"`\n\n- **用法**:\n\n你可以在标题中，使用这个组件来为某些 API 添加一些状态：\n\n``` md\n### Badge <Badge text="beta" type="warning"/> <Badge text="默认主题"/>\n```\n\n**参考:**\n\n- [在标题中使用组件](#在标题中使用组件)\n'}))};var a=o(t(0)),l=o(t(608));function o(n){return n&&n.__esModule?n:{default:n}}},604:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return o.default.createElement("svg",{className:"icon outbound",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},o.default.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),o.default.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))};var a,l=t(0),o=(a=l)&&a.__esModule?a:{default:a};t(606)},605:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){var e=(0,l.default)().$page,t=n.pageKey,s=void 0===t?e.key:t,u=n.className,d=n.slotKey,c=void 0===d?"default":d;(0,r.setGlobalInfo)("pageKey",s);var i=o.default[s]||function(){return null};return a.default.createElement(i,{className:u,slotKey:c})};var a=s(t(0)),l=s(t(99)),o=s(t(164)),r=t(36);function s(n){return n&&n.__esModule?n:{default:n}}t(607)},606:function(n,e,t){},607:function(n,e,t){},608:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=y(t(100)),l=y(t(29)),o=y(t(166)),r=t(0),s=y(r),u=y(t(4)),d=t(101),c=y(t(99)),i=y(t(102)),f=t(165),p=y(t(609)),m=y(t(605)),g=y(t(604)),h=y(t(37));function y(n){return n&&n.__esModule?n:{default:n}}var v="server"===(0,t(36).getEnv)();function w(n){var e=n.markDownString,t=n.className,u=n.slotKey,y=(0,r.useRef)(n.md||h.default.createMD()).current,w=(0,c.default)(),b=w.$site,k=w.$page,x=(0,r.useState)(null),C=(0,l.default)(x,2),_=C[0],S=C[1],O=(0,r.useRef)(null);return(0,r.useEffect)((function(){S(document.getElementById(u))}),[]),(0,r.useEffect)((function(){"default"!==u&&O&&_&&((0,a.default)(_.childNodes).forEach((function(n,e){var t=O.current.childNodes[e];t?O.current.replaceChild(n,t):O.current.appendChild(n)})),_.parentNode.removeChild(_))}),[_]),"default"!==u?s.default.createElement("div",{ref:O}):((0,f.useComponentWillMount)((function(){!function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.use((function(n){return(0,d.SupportReactComponent)(n,{allowErrorLog:!0,sandbox:(0,o.default)({},e,t),babelInit:function(n){n.availablePlugins.filterXSS&&(n.availablePlugins.filterXSS=function(){return{}})}})}))}(y,i.default,{$site:b,$page:k,JSON:JSON,ClientOnly:p.default,console:console,Content:m.default,OutboundLink:g.default,$withBase:function(n){var e=b.base;return"/"===n.charAt(0)?e+n.slice(1):n}})})),v?s.default.createElement(M,{html:y.render(e),slotKey:u,className:t}):(0,r.useMemo)((function(){var n=y.render(e);return s.default.createElement(M,{html:n,slotKey:u,className:t})}),[e,u,t]))}function M(n){var e=n.html,t=n.slotKey,a=n.className;return s.default.createElement("div",{className:"content content__"+t+" "+a,dangerouslySetInnerHTML:{__html:e}})}w.propTypes={markDownString:u.default.string,className:u.default.string,scrollAnchor:u.default.bool,mdInit:u.default.func,md:u.default.object},w.defaultProps={markDownString:"",className:"",scrollAnchor:!0,mdInit:function(){}},e.default=w},609:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(t(29));e.default=function(n){var e=(0,l.useState)(!1),t=(0,a.default)(e,2),r=t[0],u=t[1],d=n.children,c=n.onSSR,i=void 0===c?o.default.createElement(s,null):c;return(0,l.useEffect)((function(){u(!0)}),[]),r?d:i};var l=t(0),o=r(l);function r(n){return n&&n.__esModule?n:{default:n}}var s=function(){return o.default.createElement("span",null)}}}]);