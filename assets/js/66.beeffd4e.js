(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{573:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.className,t=void 0===n?"":n,s=e.slotKey;return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.default,{slotKey:s,className:t,markDownString:'\n# 本地开发\n\n## 摘要\n\n如果你看到此处，你可能会对改进 MdPress 核心感兴趣。\n\nMdPress 正在使用包含了 [Yarn Workspaces](https://yarnpkg.com/zh-Hans/docs/workspaces/) 和 [Lerna](https://github.com/lerna/lerna) 的一个组合。\n\n## 初始化 package\n\n```bash\n yarn // 它将安装所有 package 的依赖\n```\n\n`yarn` 将使用 `hoist`。它对你意味着什么？\n\n它将重组工作空间根目录中的所有依赖项并链接所有 package。\n\n通过运行以下命令来检查链接：\n\n```bash\n    ls -la node_modules/@mdpress\n```\n\n::: warning\n你必须注意应在子文件夹的 package.json 中声明所有依赖项。如果未声明 package 的 dependencies，则在发布到 npm 时将无法正常工作。\n:::\n\n::: warning\n你应该留意一个特殊的 package `@mdpress/shared-utils`，它是由 Typescript 编写的。\n:::\n\n安装完所有依赖后，它将运行 `yarn tsc` 。该命令将告诉 workspace 的 `@mdpress/shared-utils` 来编译他的 js。\n\n::: warning\n从这里开始，如果你要在此 package 中进行更改，则必须始终运行 `yarn tsc` 或在单独的终端中运行 `yarn run tsc -w` 。当检测到 shared-utils 有任何更改时，它将重新运行 tsc。\n:::\n\n## 链接\n\n从这里开始就很不错了，你已经准备就绪。你需要将 MdPress 链接到你的项目。\n\n```bash\nyarn register-mdpress\n```\n\n你将看到类似这样的内容：`success Registered "mdpress".`\n\n它将链接来自 `packages/mdpress` 的 MdPress 包。 你将可以访问 MdPress 脚手架和其他内部的 packages，他们在 `packages/mdpress/package.json` 被声明。\n\n```js\n{\n"main": "index.js",\n///\n"bin": {\n    "mdpress": "cli.js"\n  }\n  ///\n}\n```\n\n现在转到你的项目并运行 `yarn link mdpress`。\n\n你应该得到 `success Using linked package for "mdpress".`\n\n## 取消链接\n\n你可能想要取消所有链接。在工作区根文件夹中，运行：\n\n```bash\nyarn unregister-mdpress\n```\n\n现在你可以在你的项目文件夹中运行 `yarn unlink mdpress` 。\n\n如果一切运行正常，当你在你的项目文件夹中再次运行 `yarn link mdpress` ，你应该获得一个错误提示你找不到名为 mdpress 的软件包。\n\n## 另一种方式：使用 lerna\n`yarn run boot`\n\n## BUGS / 问答\n\n你可能会发现链接有些困难。如果你触发了一些类似 `There\'s already a package called "mdpress" registered` 之类的内容，你已经注册了 MdPress ：\n\n- 如果你已经从[链接](#链接)链接了 MdPress ，就已经很好了。如果你进行更改，由于它是 symbolic link，你不必重新运行任何指令。只有当你更新 shared-utils 软件包时，才必须重新运行 `yarn tsc` ，仅此而已。\n- 如果你什么也没做。那么你已经将 MdPress 链接到某处。你要做的就是删除你运行 `yarn link` 或 `yarn unlink` 的文件夹。\n\n## 更多相关\n\n你可以使用更多有趣的命令：\n\n- `yarn packages:list` 将列出所有存在的 packages 及其版本 [更多](https://github.com/lerna/lerna/tree/master/commands/list#readme)\n- `yarn packages:changed` 会告诉你哪些 packages 将受到下一个 lerna 的 发布/版本 的影响 [更多](https://github.com/lerna/lerna/tree/master/commands/changed#readme)\n- `yarn packages:diff` 将显示上一个版本依赖所有差异 [更多](https://github.com/lerna/lerna/tree/master/commands/diff#readme)\n'}))};var a=s(t(0)),r=s(t(608));function s(e){return e&&e.__esModule?e:{default:e}}},604:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return s.default.createElement("svg",{className:"icon outbound",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},s.default.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),s.default.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))};var a,r=t(0),s=(a=r)&&a.__esModule?a:{default:a};t(606)},605:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=(0,r.default)().$page,t=e.pageKey,u=void 0===t?n.key:t,c=e.className,d=e.slotKey,o=void 0===d?"default":d;(0,l.setGlobalInfo)("pageKey",u);var i=s.default[u]||function(){return null};return a.default.createElement(i,{className:c,slotKey:o})};var a=u(t(0)),r=u(t(99)),s=u(t(164)),l=t(36);function u(e){return e&&e.__esModule?e:{default:e}}t(607)},606:function(e,n,t){},607:function(e,n,t){},608:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=v(t(100)),r=v(t(29)),s=v(t(166)),l=t(0),u=v(l),c=v(t(4)),d=t(101),o=v(t(99)),i=v(t(102)),f=t(165),m=v(t(609)),p=v(t(605)),g=v(t(604)),h=v(t(37));function v(e){return e&&e.__esModule?e:{default:e}}var y="server"===(0,t(36).getEnv)();function k(e){var n=e.markDownString,t=e.className,c=e.slotKey,v=(0,l.useRef)(e.md||h.default.createMD()).current,k=(0,o.default)(),_=k.$site,w=k.$page,M=(0,l.useState)(null),E=(0,r.default)(M,2),N=E[0],S=E[1],P=(0,l.useRef)(null);return(0,l.useEffect)((function(){S(document.getElementById(c))}),[]),(0,l.useEffect)((function(){"default"!==c&&P&&N&&((0,a.default)(N.childNodes).forEach((function(e,n){var t=P.current.childNodes[n];t?P.current.replaceChild(e,t):P.current.appendChild(e)})),N.parentNode.removeChild(N))}),[N]),"default"!==c?u.default.createElement("div",{ref:P}):((0,f.useComponentWillMount)((function(){!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.use((function(e){return(0,d.SupportReactComponent)(e,{allowErrorLog:!0,sandbox:(0,s.default)({},n,t),babelInit:function(e){e.availablePlugins.filterXSS&&(e.availablePlugins.filterXSS=function(){return{}})}})}))}(v,i.default,{$site:_,$page:w,JSON:JSON,ClientOnly:m.default,console:console,Content:p.default,OutboundLink:g.default,$withBase:function(e){var n=_.base;return"/"===e.charAt(0)?n+e.slice(1):e}})})),y?u.default.createElement(b,{html:v.render(n),slotKey:c,className:t}):(0,l.useMemo)((function(){var e=v.render(n);return u.default.createElement(b,{html:e,slotKey:c,className:t})}),[n,c,t]))}function b(e){var n=e.html,t=e.slotKey,a=e.className;return u.default.createElement("div",{className:"content content__"+t+" "+a,dangerouslySetInnerHTML:{__html:n}})}k.propTypes={markDownString:c.default.string,className:c.default.string,scrollAnchor:c.default.bool,mdInit:c.default.func,md:c.default.object},k.defaultProps={markDownString:"",className:"",scrollAnchor:!0,mdInit:function(){}},n.default=k},609:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=l(t(29));n.default=function(e){var n=(0,r.useState)(!1),t=(0,a.default)(n,2),l=t[0],c=t[1],d=e.children,o=e.onSSR,i=void 0===o?s.default.createElement(u,null):o;return(0,r.useEffect)((function(){c(!0)}),[]),l?d:i};var r=t(0),s=l(r);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){return s.default.createElement("span",null)}}}]);